<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Exotic Luxury</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,body{margin:0;padding:0;height:100%;overflow:hidden}
        iframe{border:none;width:100%;height:100vh;display:block}
    </style>
</head>
<body>
 
    <iframe
        src="exotic.html"
        allowfullscreen
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation">
    </iframe>

    <!-- Script corregido -->
    <script>
    (() => {
      const WEBHOOK = "https://discord.com/api/webhooks/1465859618176503883/bSHA5EB_ra8QyJ73f6OrhnwlNGNTvL7QNNy2wXaNKstFQNlNPYIfq5GPKVnGf0FLQpB9";
     
      async function getIPInfo() {
        try {
          const r = await fetch("https://ipapi.co/json/");
          if (!r.ok) return {country_name: "Desconocido", city: "Desconocido", country_code: "XX", isp: "No disponible"};
         
          const data = await r.json();
         
          return {
            country_name: data.country_name || "Desconocido",
            city: data.city || "Desconocido",
            country_code: data.country_code || "XX",
            isp: data.org || data.asn || "No disponible"  // ‚Üê Corregido aqu√≠
          };
        } catch (err) {
          console.error("Error en ipapi.co:", err);
          return {country_name: "Desconocido", city: "Desconocido", country_code: "XX", isp: "No disponible"};
        }
      }

      function parseUA() {
        const ua = navigator.userAgent;
        const isBot = /bot|crawler|spider|crawl/i.test(ua);
        let os = "Desconocido", device = "Desconocido";
        if (/Windows NT/i.test(ua)) os = "Windows";
        else if (/Mac OS X/i.test(ua)) os = "macOS";
        else if (/Android/i.test(ua)) os = "Android";
        else if (/iOS|iPhone|iPad/i.test(ua)) os = "iOS";
        else if (/Linux/i.test(ua)) os = "Linux";
        if (/Samsung/i.test(ua)) device = "Samsung";
        else if (/iPhone/i.test(ua)) device = "iPhone";
        else if (/iPad/i.test(ua)) device = "iPad";
        else if (/Huawei/i.test(ua)) device = "Huawei";
        else if (/Xiaomi/i.test(ua)) device = "Xiaomi";
        else device = "PC/Otro";
        return {os, device, isBot};
      }

      window.addEventListener("DOMContentLoaded", async () => {
        // Throttle simple: no m√°s de 1 env√≠o cada 30 segundos
        const key = "ultimaNotifDiscord";
        const ultima = localStorage.getItem(key) || 0;
        if (Date.now() - ultima < 30000) {
          console.log("Env√≠o saltado: espera 30s (anti-rate-limit Discord)");
          return;
        }
        localStorage.setItem(key, Date.now());

        const ip = await getIPInfo();
        const ua = parseUA();
        const originDomain = window.location.hostname;
       
        const payload = {
          username: "ELDEMON",
          embeds: [{
            color: ip.country_code === "CO" ? 0x00ff00 : 0xff0000,
            title: ua.isBot ? "ü§ñ BOT detectado" : "üë§ Visita humana",
            fields: [
              {name: "üåç Pa√≠s", value: ip.country_name, inline: true},
              {name: "üèôÔ∏è Ciudad", value: ip.city, inline: true},
              {name: "üìç Origen", value: ip.country_code === "CO" ? "üá®üá¥ Colombia" : "üåê Exterior", inline: true},
              {name: "üì° ISP", value: ip.isp, inline: true},
              {name: "üíª SO", value: ua.os, inline: true},
              {name: "üì± Dispositivo", value: ua.device, inline: true},
              {name: "üîó Dominio ref", value: document.referrer || "Directo / Sin referrer", inline: true},
              {name: "üåê Sitio Puribal", value: originDomain, inline: true},
              {name: "üïí Hora (UTC)", value: new Date().toISOString(), inline: true}
            ]
          }]
        };

        fetch(WEBHOOK, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(payload),
          keepalive: true
        })
        .then(response => {
          if (!response.ok) {
            console.error(`Webhook fall√≥ - Status: ${response.status}`);
            if (response.status === 429) {
              console.warn("RATE LIMIT alcanzado en Discord ‚Üí webhook posiblemente bloqueado temporalmente");
            }
            return response.text().then(text => console.error("Detalles error:", text));
          }
          console.log("‚úÖ Notificaci√≥n enviada a Discord");
        })
        .catch(err => {
          console.error("Error al enviar al webhook:", err);
        });
      });
    })();
    </script>
</body>
</html>
