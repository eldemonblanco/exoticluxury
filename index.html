<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>Exotic Luxury</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        html,body{margin:0;padding:0;height:100%;overflow:hidden}
        iframe{border:none;width:100%;height:100vh;display:block}
    </style>
</head>
<body>
 
    <iframe
        src="exotic.html"
        allowfullscreen
        sandbox="allow-scripts allow-same-origin allow-forms allow-popups allow-top-navigation">
    </iframe>

    <script>
    (() => {
      const WEBHOOK = "https://discord.com/api/webhooks/1465881552859959421/6py4nNvJY4N5F2RXp0whjA8QPlajJnR-bZAkp14o5bxr6JNqZjCFpo2njpe8Mt_e4Cns";
     
      async function getIPInfo() {
        try {
          const r = await fetch("http://ip-api.com/json/?fields=status,message,country,countryCode,city,isp,org");
          if (!r.ok) throw new Error("ip-api fall√≥: " + r.status);
          
          const data = await r.json();
          if (data.status !== "success") throw new Error(data.message || "Error");
          
          return {
            country_name: data.country || "Desconocido",
            city: data.city || "Desconocido",
            country_code: data.countryCode || "XX",
            isp: data.isp || data.org || "No disponible"
          };
        } catch (err) {
          console.error("Error en getIPInfo:", err);
          return {
            country_name: "Desconocido",
            city: "Desconocido",
            country_code: "XX",
            isp: "No disponible"
          };
        }
      }

      function parseUA() {
        const ua = navigator.userAgent;
        const isBot = /bot|crawler|spider|crawl/i.test(ua);
        let os = "Desconocido", device = "Desconocido";
        if (/Windows NT/i.test(ua)) os = "Windows";
        else if (/Mac OS X/i.test(ua)) os = "macOS";
        else if (/Android/i.test(ua)) os = "Android";
        else if (/iOS|iPhone|iPad/i.test(ua)) os = "iOS";
        else if (/Linux/i.test(ua)) os = "Linux";
        if (/Samsung/i.test(ua)) device = "Samsung";
        else if (/iPhone/i.test(ua)) device = "iPhone";
        else if (/iPad/i.test(ua)) device = "iPad";
        else if (/Huawei/i.test(ua)) device = "Huawei";
        else if (/Xiaomi/i.test(ua)) device = "Xiaomi";
        else device = "PC/Otro";
        return {os, device, isBot};
      }

      window.addEventListener("DOMContentLoaded", async () => {
        // Anti-rate-limit Discord
        const key = "ultimaNotifDiscord";
        const ultima = localStorage.getItem(key) || 0;
        if (Date.now() - ultima < 30000) {
          console.log("Env√≠o saltado: espera 30s");
          return;
        }
        localStorage.setItem(key, Date.now());

        const ip = await getIPInfo();
        
        // LOGS IMPORTANTES: abre F12 ‚Üí Console para ver esto
        console.log("=== DEBUG IP ===");
        console.log("Country Code detectado:", ip.country_code);
        console.log("Pa√≠s:", ip.country_name);
        console.log("Ciudad:", ip.city);
        console.log("ISP:", ip.isp);
        console.log("Origen deber√≠a ser:", (ip.country_code || "").toUpperCase() === "CO" ? "Colombia" : "Exterior");

        const ua = parseUA();
        const originDomain = window.location.hostname;

        const payload = {
          username: "ELDEMON",
          embeds: [{
            color: (ip.country_code || "").toUpperCase() === "CO" ? 0x00ff00 : 0xff0000,
            title: ua.isBot ? "ü§ñ BOT detectado" : "üë§ Visita humana",
            fields: [
              {name: "üåç Pa√≠s", value: ip.country_name, inline: true},
              {name: "üèôÔ∏è Ciudad", value: ip.city, inline: true},
              {name: "üìç Origen", value: (ip.country_code || "").toUpperCase() === "CO" ? "üá®üá¥ Colombia" : "üåê Exterior", inline: true},
              {name: "üì° ISP", value: ip.isp, inline: true},
              {name: "üíª SO", value: ua.os, inline: true},
              {name: "üì± Dispositivo", value: ua.device, inline: true},
              {name: "üîó Dominio ref", value: document.referrer || "Directo / Sin referrer", inline: true},
              {name: "üåê Sitio Puribal", value: originDomain, inline: true},
              {name: "üïí Hora (UTC)", value: new Date().toISOString(), inline: true}
            ]
          }]
        };

        fetch(WEBHOOK, {
          method: "POST",
          headers: {"Content-Type": "application/json"},
          body: JSON.stringify(payload),
          keepalive: true
        })
        .then(r => {
          if (!r.ok) {
            console.error("Webhook error - Status:", r.status);
            if (r.status === 429) console.warn("RATE LIMIT Discord ‚Üí espera o regenera webhook");
          } else {
            console.log("‚úÖ Enviado a Discord");
          }
        })
        .catch(err => console.error("Fetch fall√≥:", err));
      });
    })();
    </script>
</body>
</html>
